# Default values for k8s-access-monitor
# SECURITY NOTE: All secrets in this file are DUMMY VALUES for testing only!
# In production, use external secrets management (Vault, AWS Secrets Manager, etc.)

# Global security configuration
global:
  security:
    # Whether to create secrets automatically (set to false in production)
    # When false, secrets must be created manually or via external secrets manager
    createSecrets: true

    # Security hardening options
    securityContext:
      runAsNonRoot: true
      runAsUser: 1000
      runAsGroup: 1000
      fsGroup: 1000
      readOnlyRootFilesystem: false  # Allow log writes

    # Network policies (enable in production)
    networkPolicy:
      enabled: false  # Set to true in production

    # TLS configuration
    tls:
      enabled: false  # Set to true for HTTPS in production

# Main application configuration
mainApp:
  enabled: true
  image:
    repository: k8s-access-monitor
    tag: "latest"
    pullPolicy: IfNotPresent
  schedule: "*/5 * * * *"  # Run every 5 minutes

  # Application secrets configuration
  secrets:
    # API key for external integrations
    apiKey: "dummy-api-key"  # CHANGE IN PRODUCTION!
    # JWT secret for token signing
    jwtSecret: "dummy-jwt-secret"  # CHANGE IN PRODUCTION!

  inputConfig: |
    {
      "metadata": {
        "timestamp": "2025-12-10T15:00:00Z",
        "version": "v1"
      },
      "data": [
        {
          "configs": [
            {
              "id": "36c0e6b3-ce48-4491-a591-47aebeb3d24f",
              "data": "eyJzb3VyY2UiOiAiQUQiLCAibGFzdF91cGRhdGVkIjogIjIwMjUtMTAtMTJUMTM6MjI6MDNaIiwgInJvd3NfYWZmZWN0ZWQiOiAiOCIsICJyZXBsYWNlIjogZmFsc2V9Cg=="
            }
          ],
          "internals": {}
        }
      ]
    }
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Sidecar configuration
sidecar:
  enabled: true
  image:
    repository: k8s-access-monitor-sidecar
    tag: "latest"
    pullPolicy: IfNotPresent
  elasticsearch:
    url: "http://elasticsearch:9200"
    index: "k8s-access-logs"
  resources:
    limits:
      cpu: 300m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Metrics exporter configuration
metricsExporter:
  enabled: true
  image:
    repository: k8s-access-monitor-metrics
    tag: "latest"
    pullPolicy: IfNotPresent
  port: 8000
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Service account configuration
serviceAccount:
  create: true
  name: k8s-access-monitor-sa
  annotations: {}

# RBAC configuration
rbac:
  create: true

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
