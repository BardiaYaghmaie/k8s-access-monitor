# Default values for k8s-access-monitor
# SECURITY NOTE: All secrets in this file are DUMMY VALUES for testing only!
# In production, use external secrets management (Vault, AWS Secrets Manager, etc.)

# Global security configuration
global:
  security:
    # Whether to create secrets automatically (set to false in production)
    # When false, secrets must be created manually or via external secrets manager
    createSecrets: true

    # Security hardening options
    securityContext:
      runAsNonRoot: true
      runAsUser: 1000
      runAsGroup: 1000
      fsGroup: 1000
      # readOnlyRootFilesystem: false  # Allow log writes - removed for compatibility

    # Network policies (enable in production)
    networkPolicy:
      enabled: false # Set to true in production

    # TLS configuration
    tls:
      enabled: false # Set to true for HTTPS in production

# Main application configuration
mainApp:
  enabled: true
  image:
    repository: k8s-access-monitor
    tag: "latest"
    pullPolicy: IfNotPresent
  schedule: "*/5 * * * *" # Run every 5 minutes

  # Application secrets configuration
  secrets:
    # API key for external integrations
    apiKey: "dummy-api-key" # CHANGE IN PRODUCTION!
    # JWT secret for token signing
    jwtSecret: "dummy-jwt-secret" # CHANGE IN PRODUCTION!

  # Input config is loaded from input.json file during deployment
  # Use: helm install ... --set-file mainApp.inputConfig=input.json
  inputConfig: ""
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Sidecar configuration
sidecar:
  enabled: true
  image:
    repository: k8s-access-monitor-sidecar
    tag: "latest"
    pullPolicy: IfNotPresent
  elasticsearch:
    url: "http://elasticsearch.monitoring.svc.cluster.local:9200"
    index: "k8s-access-logs"
  resources:
    limits:
      cpu: 300m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Metrics exporter configuration
metricsExporter:
  enabled: true
  image:
    repository: k8s-access-monitor-metrics
    tag: "latest"
    pullPolicy: IfNotPresent
  port: 8000
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Service account configuration
serviceAccount:
  create: true
  name: k8s-access-monitor-sa
  annotations: {}

# RBAC configuration
rbac:
  create: true

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
